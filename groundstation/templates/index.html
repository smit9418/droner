<!DOCTYPE html>
<html>
<head>
    <title>Drone Groundstation</title>
    <style>
        body { margin: 0; background: #111; }
        #container { display: grid; height: 100vh; }
        #video { grid-area: video; }
        #map { grid-area: map; background: #222; }
        #telemetry { grid-area: telemetry; color: white; }
        .layout1 { grid-template: "video map" 70% "telemetry telemetry" 30% / 50% 50%; }
        .layout2 { grid-template: "video video" 50% "map telemetry" 50% / 50% 50%; }
    </style>
</head>
<body class="layout1">
    <div id="container">
        <img id="video" src="{{ url_for('video_feed') }}">
        <div id="map">Map Placeholder (Leaflet.js)</div>
        <div id="telemetry">
            <p>Altitude: <span id="alt">0</span>m</p>
            <p>Speed: <span id="speed">0</span>km/h</p>
        </div>
    </div>

    <script>
    // WebSocket for telemetry
    const ws = new WebSocket("ws://" + location.host + "/telemetry");
    ws.onmessage = (e) => {
        const data = JSON.parse(e.data);
        document.getElementById("alt").innerText = data.altitude;
        document.getElementById("speed").innerText = data.speed;
    };
    
    // Switch layouts
    document.addEventListener("keydown", (e) => {
        if(e.key === "1") document.body.className = "layout1";
        if(e.key === "2") document.body.className = "layout2";
    });
    </script>
</body>
</html>